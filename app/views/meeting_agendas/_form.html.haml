- content_for(:header_tags) do
  = javascript_include_tag :jquery_nested_form, :plugin => 'redmine_meeting'

= error_messages_for @object
= back_url_hidden_field_tag

.box.tabular
  %p
    = f.label :subject
    = f.text_field :subject, size: 100, style: "width: 80%"
  %p
    = f.label :place
    = f.text_field :place, size: 100, style: "width: 80%"
  .splitcontentleft
    %p
      = f.label :meet_on
      = f.text_field :meet_on, size: 10, class: "calendar_for"
      = calendar_for('meeting_agenda_meet_on')
  .splitcontentright
    %p
      = f.label :start_time, l(:label_meeting_agenda_start_time)
      = f.time_select :start_time, minute_step: 15
    %p
      = f.label :end_time, l(:label_meeting_agenda_end_time)
      = f.time_select :end_time, minute_step: 15
  %div{:style=>"clear:both"}
  -#
    %p
      %h3=l :field_meeting_members
      = f.fields_for :meeting_members
      = f.link_to_add l(:button_add), :meeting_members, class: 'icon icon-add'
  %p
    %h3=l :field_meeting_questions
    = f.fields_for :meeting_questions
    = f.link_to_add l(:button_add), :meeting_questions, class: 'icon icon-add'

  :javascript
    $(function() {
      $('.autocomplete_for_issue:not(.autocomplete)').each( function(index){
        observeAutocompleteField( $(this).attr('id'), '#{escape_javascript autocomplete_for_issue_meeting_agendas_path}')
      } );
      $(document).on('nested:fieldAdded', function() {
        $('.autocomplete_for_issue:not(.autocomplete)').each( function(index){
          observeAutocompleteField( $(this).attr('id'), '#{escape_javascript autocomplete_for_issue_meeting_agendas_path}')
        } );
      });
    });
